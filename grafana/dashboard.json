{
   "__inputs": [ ],
   "__requires": [ ],
   "annotations": {
      "list": [ ]
   },
   "editable": false,
   "gnetId": null,
   "graphTooltip": 0,
   "hideControls": false,
   "id": null,
   "links": [ ],
   "refresh": "",
   "rows": [
      {
         "collapse": false,
         "collapsed": false,
         "height": "40px",
         "panels": [
            {
               "cacheTimeout": null,
               "colorBackground": true,
               "colorValue": false,
               "colors": [
                  "#d44a3a",
                  "rgba(237, 129, 40, 0.89)",
                  "#299c46"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "s",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 2,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "select\n   time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n   max(value_bigint)\nfrom metric where\n   $__unixEpochFilter(ts) AND\n   host = md5('$host')::uuid AND\n   plugin = md5('pg.uptime')::uuid\ngroup by 1\norder by 1;\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "300, 1800",
               "title": "Uptime",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "min"
            },
            {
               "cacheTimeout": null,
               "colorBackground": false,
               "colorValue": false,
               "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "decbytes",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 3,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\nselect\n  ts,\n  sum( coalesce((value_jsonb->>'size')::float8, 0) ) as value\nfrom metric where\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.databases')::uuid\ngroup by 1\norder by 1\n)\nselect\n    time_bucket_gapfill('\"$interval\"'::interval, to_timestamp(data.ts) AT TIME ZONE 'UTC', $__timeFrom(), $__timeTo() ) AS \"time\",\n    locf( avg(value) )\nfrom data\ngroup by 1\norder by 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "",
               "title": "Size",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            },
            {
               "cacheTimeout": null,
               "colorBackground": false,
               "colorValue": false,
               "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "Bps",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 4,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "select\n  time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n  avg( value_double ) as \"value\"\nfrom metric where\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.wal.speed')::uuid\ngroup by 1\norder by 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "",
               "title": "Wal",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            },
            {
               "cacheTimeout": null,
               "colorBackground": true,
               "colorValue": false,
               "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "ops",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 5,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\nselect\n  snapshot as \"ts\",\n  sum((value_jsonb->>'xact_rollback')::float8) as value\nfrom metric where\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.databases')::uuid\ngroup by snapshot\norder by snapshot\n)\nselect\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg(value)\nfrom data\ngroup by 1\norder by 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "100,500",
               "title": "Error/s",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            },
            {
               "cacheTimeout": null,
               "colorBackground": true,
               "colorValue": false,
               "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "s",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 6,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "select\n  ts as \"time\",\n  value_double as \"value\"\nfrom metric where\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.wal.replication_time_lag')::uuid\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "10, 20",
               "title": "Replication lag",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            },
            {
               "cacheTimeout": null,
               "colorBackground": true,
               "colorValue": false,
               "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "decbytes",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 7,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with slots as (\n select\n  distinct(jsonb_object_keys(value_jsonb)) as name\n from metric where\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.replication_slots')::uuid\n)\n\nselect\n  time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n  max( coalesce((m.value_jsonb->>(s.name))::bigint, 0) ) as \"value\"\nfrom metric m, slots s\nwhere\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.replication_slots')::uuid\ngroup by 1\norder by 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "10485760,83886080",
               "title": "Slot size",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "Instance stat",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": false,
         "collapsed": false,
         "height": "100px",
         "panels": [
            {
               "cacheTimeout": null,
               "colorBackground": false,
               "colorValue": false,
               "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "ops",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 8,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\n    select\n        snapshot,\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.statements')::uuid\n)\n, data2 as (select\n  snapshot as \"ts\",\n  sum((value_jsonb->>'calls')::float8) / 60 as \"value\"\nfrom data\ngroup by snapshot\norder by snapshot)\nselect\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg(value) as qps\nfrom data2\ngroup by 1\norder by 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "",
               "title": "Queries/s",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            },
            {
               "cacheTimeout": null,
               "colorBackground": true,
               "colorValue": false,
               "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "s",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 9,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\n    select\n        snapshot,\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.statements')::uuid\n),\n\ndata2 as (\nselect\n  snapshot as \"ts\",\n  sum(coalesce((value_jsonb->>'total_time')::float8,0)) / ( sum(coalesce((value_jsonb->>'calls')::float8, 0)) + 1) as value\nfrom data\ngroup by snapshot\norder by snapshot\n)\n\nselect\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg(value)\nfrom data2\ngroup by 1\norder by 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "3,10",
               "title": "Avg queries time",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            },
            {
               "cacheTimeout": null,
               "colorBackground": true,
               "colorValue": false,
               "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "s",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 10,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "select\n  time_bucket('\"$interval\"'::interval, to_timestamp(snapshot) AT TIME ZONE 'UTC' ) AS \"time\",\n  max( coalesce((value_jsonb->>'query_start_duration')::bigint, 0) )\nfrom metric where\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.activity')::uuid AND\n  not value_jsonb->>'query' ~ '^autovacuum: '\ngroup by 1\norder by 1;\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "300,600",
               "title": "Longest query",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            },
            {
               "cacheTimeout": null,
               "colorBackground": false,
               "colorValue": false,
               "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "ops",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 11,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (select\n  ts as \"ts\",\n  sum( coalesce((value_jsonb->>'xact_commit')::float8, 0) + coalesce((value_jsonb->>'xact_rollback')::float8, 0) ) as value\nfrom metric where\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.databases')::uuid\ngroup by 1\norder by 1)\nselect\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg(value)\nfrom data\ngroup by 1\norder by 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "",
               "title": "Transaction/s",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            },
            {
               "cacheTimeout": null,
               "colorBackground": true,
               "colorValue": false,
               "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "short",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 12,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (select\n  snapshot as \"ts\",\n  sum(coalesce((value_jsonb->>'count')::float8,0)) as \"value\"\nfrom metric where\n  $__unixEpochFilter(ts) and\n  host = md5('$host')::uuid and\n  plugin = md5('pg.activity.waits')::uuid and\n  value_jsonb->>'state' = 'idle in transaction'\ngroup by snapshot\norder by snapshot)\nselect\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg(value)\nfrom data\n group by 1\n order by 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "100,300",
               "title": "Idle in tx",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            },
            {
               "cacheTimeout": null,
               "colorBackground": true,
               "colorValue": false,
               "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "short",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 13,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (select\n  snapshot as \"ts\",\n  sum((value_jsonb->>'count')::float8) as value\nfrom metric where\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.activity.waits')::uuid AND\n  value_jsonb->>'state' <> 'idle in transaction'\ngroup by snapshot\norder by snapshot)\nselect\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg(value)\nfrom data\ngroup by 1\norder by 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "40,100",
               "title": "Waiting queries",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "Queries stat",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": false,
         "collapsed": false,
         "height": "100px",
         "panels": [
            {
               "cacheTimeout": null,
               "colorBackground": true,
               "colorValue": false,
               "colors": [
                  "#d44a3a",
                  "rgba(237, 129, 40, 0.89)",
                  "#299c46"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "percentunit",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 14,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\nselect\n  ts,\n  sum( coalesce((value_jsonb->>'blks_hit')::float8, 0) ) / (1 + sum( coalesce((value_jsonb->>'blks_read')::float8, 0) ) + sum( coalesce((value_jsonb->>'blks_hit')::float8, 0) ) ) as value\nfrom metric where\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.databases')::uuid\ngroup by ts\norder by ts\n)\nselect\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg(value)\nfrom data\ngroup by 1\norder by 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "0.5,0.8",
               "title": "Buffer pool (hit ratio)",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "min"
            },
            {
               "cacheTimeout": null,
               "colorBackground": true,
               "colorValue": false,
               "colors": [
                  "#d44a3a",
                  "rgba(237, 129, 40, 0.89)",
                  "#299c46"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "percentunit",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 15,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "WITH usage_count_0 as (\nSELECT\n  m.snapshot AS \"time\",\n  sum(COALESCE( (m.value_jsonb->>'usage_count_0')::bigint, 0 ) * 8 * 1024) as \"size\"\nFROM metric m\nWHERE\n  $__unixEpochFilter(m.ts) AND\n  m.host = md5('$host')::uuid AND\n  m.plugin = md5('pg.buffercache')::uuid\nGROUP BY 1\nORDER BY 1\n),\ntotal as (\nSELECT\n  m.snapshot AS \"time\",\n  sum(COALESCE( (m.value_jsonb->>'buffers_count')::bigint, 0 ) * 8 * 1024) as \"size\"\nFROM metric m\nWHERE\n  $__unixEpochFilter(m.ts) AND\n  m.host = md5('$host')::uuid AND\n  m.plugin = md5('pg.buffercache')::uuid\nGROUP BY 1\nORDER BY 1\n)\n, data as (\nSELECT\n    total.time as \"ts\",\n    1 - (usage_count_0.size / (total.size + 1)) as \"value\"\nFROM total\nINNER JOIN usage_count_0 on usage_count_0.time = total.time\n)\n\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg(value)\nfrom data\nGROUP BY 1\nORDER BY 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "0.5,0.8",
               "title": "Buffer reuse",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            },
            {
               "cacheTimeout": null,
               "colorBackground": true,
               "colorValue": false,
               "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "percentunit",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 16,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "WITH dirty as (\nSELECT\n  m.snapshot AS \"time\",\n  sum(COALESCE( (m.value_jsonb->>'dirty_count')::bigint, 0 ) * 8 * 1024) as \"size\"\nFROM metric m\nWHERE\n  $__unixEpochFilter(m.ts) AND\n  m.host = md5('$host')::uuid AND\n  m.plugin = md5('pg.buffercache')::uuid\nGROUP BY 1\nORDER BY 1\n),\ntotal as (\nSELECT\n  m.snapshot AS \"time\",\n  sum(COALESCE( (m.value_jsonb->>'buffers_count')::bigint, 0 ) * 8 * 1024) as \"size\"\nFROM metric m\nWHERE\n  $__unixEpochFilter(m.ts) AND\n  m.host = md5('$host')::uuid AND\n  m.plugin = md5('pg.buffercache')::uuid\nGROUP BY 1\nORDER BY 1\n)\n, data as (SELECT\n    total.time as \"ts\",\n    (dirty.size / (total.size + 1)) as \"value\"\nFROM total\nINNER JOIN dirty on dirty.time = total.time)\n\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg(value)\nfrom data\nGROUP BY 1\nORDER BY 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "0.1,0.2",
               "title": "Dirty buffers",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            },
            {
               "cacheTimeout": null,
               "colorBackground": true,
               "colorValue": false,
               "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "ops",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 17,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\n    select\n        snapshot,\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.user_tables')::uuid\n)\n, data2 as (select\n  snapshot as \"ts\",\n  sum( coalesce((value_jsonb->>'seq_scan')::float8, 0) ) as value\nfrom data where\n  coalesce((value_jsonb->>'relpages')::bigint, 0)> (256*1024*1024) / (8*1024)\ngroup by snapshot\norder by snapshot)\n\nselect\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg(value)\nfrom data2\n group by 1\n order by 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "10,20",
               "title": "Relation seq scans (>256MB)",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            },
            {
               "cacheTimeout": null,
               "colorBackground": true,
               "colorValue": false,
               "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
               ],
               "datasource": "$POSTGRES_DS",
               "decimals": 2,
               "format": "percentunit",
               "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
               },
               "id": 18,
               "interval": null,
               "links": [ ],
               "mappingType": 1,
               "mappingTypes": [
                  {
                     "name": "value to text",
                     "value": 1
                  },
                  {
                     "name": "range to text",
                     "value": 2
                  }
               ],
               "maxDataPoints": 100,
               "nullPointMode": "connected",
               "nullText": null,
               "postfix": "",
               "postfixFontSize": "50%",
               "prefix": "",
               "prefixFontSize": "50%",
               "rangeMaps": [
                  {
                     "from": "null",
                     "text": "N/A",
                     "to": "null"
                  }
               ],
               "span": 2,
               "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "rgb(31, 120, 193)",
                  "show": true
               },
               "tableColumn": "",
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\n    select\n        snapshot,\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.user_tables')::uuid\n)\nselect\n  snapshot as \"time\",\n  sum(coalesce((value_jsonb->>'n_dead_tup')::bigint, 0)) / sum(coalesce((value_jsonb->>'n_live_tup')::bigint, 0))\nfrom data where\n  (value_jsonb->>'n_live_tup')::bigint > 0\ngroup by 1\norder by 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": "0.05,0.2",
               "title": "Bloat tables",
               "type": "singlestat",
               "valueFontSize": "80%",
               "valueMaps": [
                  {
                     "op": "=",
                     "text": "N/A",
                     "value": "null"
                  }
               ],
               "valueName": "max"
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "Buffers stat",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": true,
         "collapsed": true,
         "height": "300px",
         "panels": [
            {
               "columns": [ ],
               "datasource": "$POSTGRES_DS",
               "id": 19,
               "span": 12,
               "styles": [
                  {
                     "decimals": 2,
                     "pattern": "/.*/",
                     "type": "number",
                     "unit": "short"
                  }
               ],
               "targets": [
                  {
                     "format": "table",
                     "rawSql": "select\n   value_jsonb->>'datname' as \"name\",\n   pg_catalog.pg_size_pretty((max(value_jsonb->>'size')::bigint)) as \"size\",\n   max( (value_jsonb->>'age')::bigint ) as \"age\",\n   sum( (value_jsonb->>'conflicts')::float8 ) as \"conflicts\",\n   sum( (value_jsonb->>'temp_files')::float8 ) as \"temp files\",\n   TO_CHAR(( sum( (value_jsonb->>'blk_read_time')::float8  )  * interval '1 millisecond' ) , 'HH24:MI:SS') as \"read time\",\n   TO_CHAR(( sum( (value_jsonb->>'blk_write_time')::float8  )  * interval '1 millisecond' ) , 'HH24:MI:SS') as \"write time\",\n   round( avg( (value_jsonb->>'xact_commit')::numeric ), 2) as \"commits/s\",\n   round( avg( (value_jsonb->>'xact_rollback')::numeric ), 2) as \"rollback/s\"\nfrom metric where\n   $__unixEpochFilter(ts) AND\n   host = md5('$host')::uuid AND\n   plugin = md5('pg.databases')::uuid\ngroup by 1\norder by 1\n",
                     "refId": "A"
                  }
               ],
               "title": "databases",
               "transform": "table",
               "type": "table"
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "Databases",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": true,
         "collapsed": true,
         "height": "300px",
         "panels": [
            {
               "columns": [ ],
               "datasource": "$POSTGRES_DS",
               "id": 20,
               "span": 12,
               "styles": [
                  {
                     "decimals": 2,
                     "pattern": "/size/",
                     "type": "number",
                     "unit": "decbytes"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/(deleted|live)/",
                     "type": "number",
                     "unit": "percentunit"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/.*/",
                     "type": "number",
                     "unit": "short"
                  }
               ],
               "targets": [
                  {
                     "format": "table",
                     "rawSql": "with data as (\n     select\n         snapshot,\n         jsonb_array_elements(value_jsonb) as value_jsonb\n     from metric where\n         $__unixEpochFilter(ts) AND\n         host = md5('$host')::uuid AND\n         plugin = md5('pg.user_tables')::uuid\n )\n select\n     value_jsonb->>'full_table_name' as \"table\",\n     max( (value_jsonb->>'relpages')::bigint)*8*1024  as \"size\",\n     max( (value_jsonb->>'reltuples')::bigint ) as \"rows\",\n     round(100* max((value_jsonb->>'n_dead_tup')::float8) / ( max((value_jsonb->>'n_dead_tup')::float8 ) + max((value_jsonb->>'n_live_tup')::float8)))/100 as \"rows % deleted\",\n     round(100* max((value_jsonb->>'n_live_tup')::float8) / ( max((value_jsonb->>'n_dead_tup')::float8 ) + max((value_jsonb->>'n_live_tup')::float8)))/100 as \"rows % live\"\n     from data\n     group by 1\n     having ( max((value_jsonb->>'n_dead_tup')::float8 ) + max((value_jsonb->>'n_live_tup')::float8)) > 0\n     order by 2 desc\nlimit 20;\n",
                     "refId": "A"
                  }
               ],
               "title": "biggest tables",
               "transform": "table",
               "type": "table"
            },
            {
               "columns": [ ],
               "datasource": "$POSTGRES_DS",
               "id": 21,
               "span": 12,
               "styles": [
                  {
                     "decimals": 2,
                     "pattern": "/size/",
                     "type": "number",
                     "unit": "decbytes"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/.*/",
                     "type": "number",
                     "unit": "short"
                  }
               ],
               "targets": [
                  {
                     "format": "table",
                     "rawSql": "with data as (\n     select\n         snapshot,\n         jsonb_array_elements(value_jsonb) as value_jsonb\n     from metric where\n         $__unixEpochFilter(ts) AND\n         host = md5('$host')::uuid AND\n         plugin = md5('pg.user_tables')::uuid\n )\n select\n     value_jsonb->>'full_table_name' as \"table\",\n     max( (value_jsonb->>'relpages')::bigint)*8*1024  as \"size max\",\n     min( (value_jsonb->>'relpages')::bigint)*8*1024  as \"size min\",\n     max( (value_jsonb->>'reltuples')::bigint ) as \"rows max\",\n     min( (value_jsonb->>'reltuples')::bigint ) as \"rows min\",\n     max( (value_jsonb->>'reltuples')::bigint) - min( (value_jsonb->>'reltuples')::bigint) as \"rows changed\"\n     from data\n     group by 1\n     order by max( (value_jsonb->>'reltuples')::bigint) - min( (value_jsonb->>'reltuples')::bigint) desc, 2 desc\nlimit 20;\n",
                     "refId": "A"
                  }
               ],
               "title": "most changed tables",
               "transform": "table",
               "type": "table"
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "Tables",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": true,
         "collapsed": true,
         "height": "400px",
         "panels": [
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 22,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": true,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 12,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\n    select\n        snapshot,\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.statements')::uuid\n)\n, data2 as (SELECT\n  snapshot as \"ts\",\n  sum((value_jsonb->>'calls')::float8) / 60 as \"value\"\nfrom data\ngroup by snapshot\norder by snapshot)\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg(value) as qps\nfrom data2\nGROUP BY 1\nORDER BY 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Queries/s ($host)",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 23,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": true,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 12,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (SELECT\n  ts as \"ts\",\n  value_jsonb->>'datname' as \"database\",\n  sum( coalesce((value_jsonb->>'xact_commit')::float8, 0) + coalesce((value_jsonb->>'xact_rollback')::float8, 0) ) as value\nfrom metric where\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.databases')::uuid\ngroup by 1,2\norder by ts)\n\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    database,\n    avg(value)\nfrom data\nGROUP BY 1,2\nORDER BY 1,2\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Transactions/s ($host)",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "Operations",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": true,
         "collapsed": true,
         "height": "400px",
         "panels": [
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 24,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": true,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 12,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "SELECT\n  time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n--  avg( (value_jsonb->>'idle')::int ) as \"idle\",\n  avg( (value_jsonb->>'active')::int ) as \"active\",\n  avg( (value_jsonb->>'idle in transaction')::int ) as \"idle in transaction\",\n  avg( (value_jsonb->>'idle in transaction (aborted)')::int ) as \"idle in transaction (aborted)\",\n  avg( (value_jsonb->>'fastpath function call')::int ) as \"fastpath function call\"\nFROM metric\nWHERE\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.activity.states')::uuid\nGROUP BY 1\nORDER BY 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Backend states ($host)",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "none",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "none",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 25,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": true,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 12,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with wait_event_type as (\n    select\n        distinct(m.value_jsonb->>'wait_event_type') as wait_event_type\n    from metric m\n    where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.activity.waits')::uuid\n)\n\n, data2 as (SELECT\n   snapshot AS \"ts\",\n   sum( coalesce((value_jsonb->>'count')::bigint, 0) ) as value,\n   t.wait_event_type as \"type\"\nFROM wait_event_type t\n    LEFT JOIN metric m on t.wait_event_type = m.value_jsonb->>'wait_event_type'\nWHERE\n  $__unixEpochFilter(m.ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.activity.waits')::uuid\nGROUP BY 1,3\nORDER BY 1,3)\n\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    type,\n    avg(value)\nfrom data2\nGROUP BY 1,2\nORDER BY 1,2\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Backend states (wait event type $host)",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "none",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "none",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 26,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": true,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 12,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (SELECT\n  ts AS \"ts\",\n   sum((value_jsonb->>'count')::bigint) as value,\n   coalesce( (value_jsonb->>'wait_event')::text, 'CPU') as \"type\"\nFROM metric\nWHERE\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.activity.waits')::uuid\nGROUP BY 1,3\nORDER BY 1,3)\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    type,\n    avg(value)\nfrom data\nGROUP BY 1,2\nORDER BY 1,2\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Backend states (wait events $host)",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "none",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "none",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "Backend states",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": true,
         "collapsed": true,
         "height": "800px",
         "panels": [
            {
               "columns": [ ],
               "datasource": "$POSTGRES_DS",
               "id": 27,
               "span": 12,
               "styles": [
                  {
                     "decimals": 2,
                     "pattern": "/disk/",
                     "type": "number",
                     "unit": "decbytes"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/time/",
                     "type": "number",
                     "unit": "ms"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/.*/",
                     "type": "number",
                     "unit": "short"
                  }
               ],
               "targets": [
                  {
                     "format": "table",
                     "rawSql": "with data as (\n    select\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.statements')::uuid\n)\nselect\n   value_jsonb->>'dbname' as \"database\",\n   value_jsonb->>'query' as \"query\",\n   sum( coalesce( (value_jsonb->>'calls')::bigint, 0 ) ) as \"calls\",\n   sum(\n         coalesce((value_jsonb->>'shared_blks_read')::float8, 0)\n       + coalesce((value_jsonb->>'local_blks_read')::float8,  0)\n       + coalesce((value_jsonb->>'temp_blks_read')::float8,   0)\n    )*8*1024::bigint as \"disk\",\n    sum(coalesce((value_jsonb->>'blk_read_time')::float8,  0))  as  \"time\"\n    from data\n    group by 1,2\n    having\n    sum(\n        coalesce((value_jsonb->>'shared_blks_read')::float8, 0)\n        + coalesce((value_jsonb->>'local_blks_read')::float8, 0)\n        + coalesce((value_jsonb->>'temp_blks_read')::float8, 0)\n    ) > 0\n    order by sum(\n        coalesce((value_jsonb->>'shared_blks_read')::float8, 0)\n        + coalesce((value_jsonb->>'local_blks_read')::float8, 0)\n        + coalesce((value_jsonb->>'temp_blks_read')::float8, 0)\n    )\n",
                     "refId": "A"
                  }
               ],
               "title": "Disk read",
               "transform": "table",
               "type": "table"
            },
            {
               "columns": [ ],
               "datasource": "$POSTGRES_DS",
               "id": 28,
               "span": 12,
               "styles": [
                  {
                     "decimals": 2,
                     "pattern": "/disk/",
                     "type": "number",
                     "unit": "decbytes"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/time/",
                     "type": "number",
                     "unit": "ms"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/.*/",
                     "type": "number",
                     "unit": "short"
                  }
               ],
               "targets": [
                  {
                     "format": "table",
                     "rawSql": "with data as (\n    select\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.statements')::uuid\n)\nselect\n   value_jsonb->>'dbname' as \"database\",\n   value_jsonb->>'query' as \"query\",\n   sum( coalesce( (value_jsonb->>'calls')::bigint, 0 ) ) as \"calls\",\n   sum(\n         coalesce((value_jsonb->>'shared_blks_written')::float8, 0)\n       + coalesce((value_jsonb->>'local_blks_written')::float8,  0)\n       + coalesce((value_jsonb->>'local_blks_dirtied')::float8,  0)\n       + coalesce((value_jsonb->>'temp_blks_written')::float8,   0)\n    )*8/1024::bigint as \"disk\",\n    sum(coalesce((value_jsonb->>'blk_write_time')::float8, 0))  as  \"time\"\n    from data\n    group by 1,2\n    having\n    sum(\n          coalesce((value_jsonb->>'shared_blks_written')::float8, 0)\n        + coalesce((value_jsonb->>'local_blks_written')::float8, 0)\n        + coalesce((value_jsonb->>'local_blks_dirtied')::float8, 0)\n        + coalesce((value_jsonb->>'temp_blks_written')::float8, 0)\n    ) > 0\n    order by sum(\n          coalesce((value_jsonb->>'shared_blks_written')::float8, 0)\n        + coalesce((value_jsonb->>'local_blks_written')::float8, 0)\n        + coalesce((value_jsonb->>'local_blks_dirtied')::float8, 0)\n        + coalesce((value_jsonb->>'temp_blks_written')::float8, 0)\n    )\n",
                     "refId": "A"
                  }
               ],
               "title": "Disk write",
               "transform": "table",
               "type": "table"
            },
            {
               "columns": [ ],
               "datasource": "$POSTGRES_DS",
               "id": 29,
               "span": 12,
               "styles": [
                  {
                     "decimals": 2,
                     "pattern": "/total_time/",
                     "type": "number",
                     "unit": "ms"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/.*/",
                     "type": "number",
                     "unit": "short"
                  }
               ],
               "targets": [
                  {
                     "format": "table",
                     "rawSql": "with data as (\n    select\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.statements')::uuid\n)\nselect\n    value_jsonb->>'dbname' as \"database\",\n    value_jsonb->>'query' as \"query\",\n    sum( coalesce( (value_jsonb->>'calls')::bigint, 0 ) ) as \"calls\",\n    sum(coalesce((value_jsonb->>'total_time')::float8, 0)) as \"total_time\"\n    from data where\n        value_jsonb->>'query' <> 'BEGIN' AND\n        value_jsonb->>'query' <> 'BEGIN READ WRITE' AND\n        value_jsonb->>'query' <> 'COMMIT' AND\n        value_jsonb->>'query' <> 'ROLLBACK'\n    group by 1,2\n    order by sum(coalesce((value_jsonb->>'total_time')::float8, 0)) desc\n    limit 20\n",
                     "refId": "A"
                  }
               ],
               "title": "Execution time",
               "transform": "table",
               "type": "table"
            },
            {
               "columns": [ ],
               "datasource": "$POSTGRES_DS",
               "id": 30,
               "span": 12,
               "styles": [
                  {
                     "decimals": 2,
                     "pattern": "/size/",
                     "type": "number",
                     "unit": "decbytes"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/.*/",
                     "type": "number",
                     "unit": "short"
                  }
               ],
               "targets": [
                  {
                     "format": "table",
                     "rawSql": "with data as (\n    select\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.statements')::uuid\n)\nselect\n    value_jsonb->>'dbname' as \"database\",\n    value_jsonb->>'query' as \"query\",\n    sum(\n        coalesce((value_jsonb->>'temp_blks_written')::float8, 0)\n        + coalesce((value_jsonb->>'temp_blks_read')::float8, 0)\n       )::bigint*8*1024 as \"size\"\n    from data\n    group by 1,2\n    having sum(\n        coalesce((value_jsonb->>'temp_blks_written')::float8, 0)\n        + coalesce((value_jsonb->>'temp_blks_read')::float8, 0)\n      ) > 0\n    order by\n      sum(\n        coalesce((value_jsonb->>'temp_blks_written')::float8, 0)\n        + coalesce((value_jsonb->>'temp_blks_read')::float8, 0)\n      ) desc\n    limit 20\n",
                     "refId": "A"
                  }
               ],
               "title": "Temp files",
               "transform": "table",
               "type": "table"
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "Stat statements",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": true,
         "collapsed": true,
         "height": "800px",
         "panels": [
            {
               "columns": [ ],
               "datasource": "$POSTGRES_DS",
               "id": 31,
               "span": 12,
               "styles": [
                  {
                     "dateFormat": "YYYY-MM-DD HH:mm:ss",
                     "pattern": "/seen/",
                     "type": "date",
                     "unit": "Time"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/duration/",
                     "type": "number",
                     "unit": "s"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/.*/",
                     "type": "number",
                     "unit": "short"
                  }
               ],
               "targets": [
                  {
                     "format": "table",
                     "rawSql": "select\n    value_jsonb->>'database' as \"dbname\",\n    value_jsonb->>'blocked_statement' as \"blocked_statement\",\n    value_jsonb->>'current_statement_in_blocking_process' as \"current_statement_in_blocking_process\",\n    min(to_timestamp(ts) AT TIME ZONE 'UTC') as \"first seen\",\n    max(to_timestamp(ts) AT TIME ZONE 'UTC') as \"last seen\",\n    value_jsonb->>'blocked_query_id' as blocked_query_id,\n    value_jsonb->>'blocking_query_id' as blocking_query_id,\n    (max(ts) - min(ts)) as \"duration\"\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.block')::uuid\n    group by 1,2,3, value_jsonb->>'blocked_query_id', value_jsonb->>'blocking_query_id'\n    having\n      (max(ts) - min(ts)) > 1\n    order by (max(ts) - min(ts)) desc\n",
                     "refId": "A"
                  }
               ],
               "title": "Blocks",
               "transform": "table",
               "type": "table"
            },
            {
               "columns": [ ],
               "datasource": "$POSTGRES_DS",
               "id": 32,
               "span": 12,
               "styles": [
                  {
                     "dateFormat": "YYYY-MM-DD HH:mm:ss",
                     "pattern": "/seen/",
                     "type": "date",
                     "unit": "Time"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/duration/",
                     "type": "number",
                     "unit": "s"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/(read|write)/",
                     "type": "number",
                     "unit": "decbytes"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/(user|system)/",
                     "type": "number",
                     "unit": "s"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/.*/",
                     "type": "number",
                     "unit": "short"
                  }
               ],
               "targets": [
                  {
                     "format": "table",
                     "rawSql": "select\n   value_jsonb->>'datname' as \"datname\",\n   value_jsonb->>'query_id' as \"query_id\",\n   min(to_timestamp(ts) AT TIME ZONE 'UTC') as \"first seen\",\n   max(to_timestamp(ts) AT TIME ZONE 'UTC') as \"last seen\",\n   (max(ts) - min(ts))::bigint as \"duration\",\n   max(value_jsonb->>'query') as \"query\",\n   (max(value_jsonb->>'rchar')::float8)::bigint as \"read\",\n   (max(value_jsonb->>'wchar')::float8)::bigint as \"write\",\n   (max(value_jsonb->>'utime')::float8)/100 as \"user\",\n   (max(value_jsonb->>'stime')::float8)/100 as \"system\"\n   from metric where\n       $__unixEpochFilter(ts) AND\n       host = md5('$host')::uuid AND\n       plugin = md5('pg.activity')::uuid\n   group by 1,2\n   having  max(ts) - min(ts) > 60\n   order by max(value_jsonb->>'rchar')::float8 desc nulls last\n",
                     "refId": "A"
                  }
               ],
               "title": "Long queries",
               "transform": "table",
               "type": "table"
            },
            {
               "columns": [ ],
               "datasource": "$POSTGRES_DS",
               "id": 33,
               "span": 6,
               "styles": [
                  {
                     "dateFormat": "YYYY-MM-DD HH:mm:ss",
                     "pattern": "/last_/",
                     "type": "date",
                     "unit": "Time"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/.*/",
                     "type": "number",
                     "unit": "short"
                  }
               ],
               "targets": [
                  {
                     "format": "table",
                     "rawSql": "with data as (\n    select\n        snapshot,\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.user_tables')::uuid\n)\nselect\n    value_jsonb->>'full_table_name' as \"table\",\n    max( to_timestamp( (value_jsonb->>'last_autovacuum')::bigint ) AT TIME ZONE 'UTC') as \"last_autovacuum\",\n    sum( (value_jsonb->>'autovacuum_count')::bigint ) as \"autovacuum count\"\n    from data\n    group by 1\n    having (sum( (value_jsonb->>'autovacuum_count')::bigint ) > 0)\n    order by 2\n",
                     "refId": "A"
                  }
               ],
               "title": "Autovacuum",
               "transform": "table",
               "type": "table"
            },
            {
               "columns": [ ],
               "datasource": "$POSTGRES_DS",
               "id": 34,
               "span": 6,
               "styles": [
                  {
                     "dateFormat": "YYYY-MM-DD HH:mm:ss",
                     "pattern": "/last_/",
                     "type": "date",
                     "unit": "Time"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/.*/",
                     "type": "number",
                     "unit": "short"
                  }
               ],
               "targets": [
                  {
                     "format": "table",
                     "rawSql": "with data as (\n    select\n        snapshot,\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.user_tables')::uuid\n)\nselect\n    value_jsonb->>'full_table_name' as \"table\",\n    max( to_timestamp( (value_jsonb->>'last_autoanalyze')::bigint ) AT TIME ZONE 'UTC') as \"last_autoanalyze\",\n    sum( (value_jsonb->>'autoanalyze_count')::bigint ) as \"autoanalyze count\"\n    from data\n    group by 1\n    having (sum( (value_jsonb->>'autoanalyze_count')::bigint ) > 0)\n    order by 2\n",
                     "refId": "A"
                  }
               ],
               "title": "Autoanalyze",
               "transform": "table",
               "type": "table"
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "Logged statements",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": true,
         "collapsed": true,
         "height": "400px",
         "panels": [
            {
               "columns": [ ],
               "datasource": "$POSTGRES_DS",
               "id": 35,
               "span": 12,
               "styles": [
                  {
                     "dateFormat": "YYYY-MM-DD HH:mm:ss",
                     "pattern": "/timestamp/",
                     "type": "date",
                     "unit": "Time"
                  },
                  {
                     "pattern": "/count/",
                     "type": "number",
                     "unit": "none"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/table size/",
                     "type": "number",
                     "unit": "decbytes"
                  },
                  {
                     "decimals": 2,
                     "pattern": "/.*/",
                     "type": "number",
                     "unit": "short"
                  }
               ],
               "targets": [
                  {
                     "format": "table",
                     "rawSql": "with data as (\n    select\n        snapshot,\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.user_tables')::uuid\n)\nSELECT\n  to_timestamp(snapshot) as \"timestamp\",\n  value_jsonb->>'full_table_name' as table,\n  coalesce((value_jsonb->>'relpages')::bigint, 0)*8*1024 as \"table size\",\n  sum( coalesce((value_jsonb->>'seq_scan')::float8, 0) ) as \"count\"\nfrom data where\n  coalesce((value_jsonb->>'relpages')::bigint, 0)> (256*1024*1024) / (8*1024)\ngroup by 1,2,3,snapshot\nhaving sum( coalesce((value_jsonb->>'seq_scan')::float8, 0) ) > 0\norder by snapshot;\n",
                     "refId": "A"
                  }
               ],
               "title": "Sequential scans tables > 256Mb",
               "transform": "table",
               "type": "table"
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "Seq scans",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": true,
         "collapsed": true,
         "height": "400px",
         "panels": [
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 36,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": true,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 12,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\n  SELECT\n      m.ts as \"time\",\n      j.key as \"relation\",\n      sum(coalesce((j.value->>'buffers')::bigint, 0)*8*1024) as \"size\"\n  FROM metric m\n  CROSS JOIN LATERAL jsonb_each((m.value_jsonb->>'per_relation_stat')::jsonb) j\n  WHERE\n    $__unixEpochFilter(m.ts) AND\n    m.host = md5('$host')::uuid AND\n    m.plugin = md5('pg.buffercache')::uuid\n  GROUP BY 1,2\n  ORDER BY 1,2\n)\n, big_relations as (\n  SELECT\n      d.relation as relation,\n      sum(d.size) as size\n  FROM data d\n  GROUP BY 1\n  ORDER BY 2 DESC\n  LIMIT 20\n)\nSELECT\n  time_bucket('\"$interval\"'::interval, to_timestamp(d.time) AT TIME ZONE 'UTC' ) AS \"time\",\n  d.relation,\n  avg(d.size)\nFROM data d\nINNER JOIN big_relations t ON t.relation = d.relation\nGROUP BY 1,2\nORDER BY 1,2\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Buffer pool per relation ($host)",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "300px",
               "id": 37,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 4,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\nSELECT\n  m.ts,\n  sum(COALESCE( (m.value_jsonb->>'dirty_count')::bigint, 0 ) * 8 * 1024) as \"dirty\",\n  m.value_jsonb->>'datname' as \"database\"\nFROM metric m\nWHERE\n  $__unixEpochFilter(m.ts) AND\n  m.host = md5('$host')::uuid AND\n  m.plugin = md5('pg.buffercache')::uuid\nGROUP BY 1, 3\nORDER BY 1\n)\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(d.ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg( d.dirty ),\n    d.database\nFROM data d\nGROUP BY 1,3\nORDER BY 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Buffer pool dirty",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "300px",
               "id": 38,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 4,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\nSELECT\n  m.ts AS \"time\",\n  sum(COALESCE( (m.value_jsonb->>'usage_count_0')::bigint, 0 ) * 8 * 1024) as \"usage\",\n  m.value_jsonb->>'datname' as \"database\"\nFROM metric m\nWHERE\n  $__unixEpochFilter(m.ts) AND\n  m.host = md5('$host')::uuid AND\n  m.plugin = md5('pg.buffercache')::uuid\nGROUP BY 1, m.value_jsonb->>'datname'\nORDER BY 1\n)\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(d.time) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg( d.usage ),\n    d.database\nFROM data d\nGROUP BY 1,3\nORDER BY 1,3\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Buffer pool (usagecount == 0)",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "300px",
               "id": 39,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 4,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\nSELECT\n  m.ts AS \"time\",\n  sum(COALESCE( (m.value_jsonb->>'usage_count_3')::bigint, 0 ) * 8 * 1024) as \"usage\",\n  m.value_jsonb->>'datname' as \"database\"\nFROM metric m\nWHERE\n  $__unixEpochFilter(m.ts) AND\n  m.host = md5('$host')::uuid AND\n  m.plugin = md5('pg.buffercache')::uuid\nGROUP BY 1, m.value_jsonb->>'datname'\nORDER BY 1\n)\n\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(d.time) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg( d.usage ),\n    d.database\nFROM data d\nGROUP BY 1,3\nORDER BY 1,3\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Buffer pool (usagecount >= 3)",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "300px",
               "id": 40,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 12,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\nSELECT\n  m.ts AS \"time\",\n  sum(COALESCE( (m.value_jsonb->>'buffers_count')::bigint, 0 ) * 8 * 1024) as \"usage\",\n  m.value_jsonb->>'datname' as \"database\"\nFROM metric m\nWHERE\n  $__unixEpochFilter(m.ts) AND\n  m.host = md5('$host')::uuid AND\n  m.plugin = md5('pg.buffercache')::uuid\nGROUP BY 1, m.value_jsonb->>'datname'\nORDER BY 1\n)\n\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(d.time) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg( d.usage ),\n    d.database\nFROM data d\nGROUP BY 1,3\nORDER BY 1,3\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Buffer per database",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "Buffer pool usage",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": true,
         "collapsed": true,
         "height": "600px",
         "panels": [
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "600px",
               "id": 41,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 4,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\n    select\n        snapshot,\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.user_tables')::uuid\n)\n, tables AS(\n    SELECT\n        m.value_jsonb->>'full_table_name' as \"table\",\n        sum( coalesce((m.value_jsonb->>'seq_tup_read')::float8, 0) )  as \"rows\"\n    FROM data m\n    GROUP BY 1\n    ORDER BY 2 DESC\n    LIMIT 20\n)\n, data2 as (SELECT\n  snapshot AS \"ts\",\n  m.value_jsonb->>'full_table_name' as \"table\",\n  sum( coalesce((m.value_jsonb->>'seq_tup_read')::float8, 0) ) as \"value\"\nFROM tables t\nINNER JOIN data m ON t.table = m.value_jsonb->>'full_table_name'\nGROUP BY 1,2\nORDER BY 1,2)\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    \"table\", avg(value)\nfrom data2\nGROUP BY 1,2\nORDER BY 1,2\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Seq scan tuples access",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "600px",
               "id": 42,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 4,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\n    select\n        snapshot,\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.user_tables')::uuid\n)\n, tables AS (\n    SELECT\n        m.value_jsonb->>'full_table_name' as \"table\",\n        sum( coalesce((m.value_jsonb->>'idx_tup_fetch')::float8, 0) )  as \"rows\"\n    FROM data m\n    GROUP BY 1\n    ORDER BY 2 DESC\n    LIMIT 20\n)\n, data2 as ( SELECT\n  m.snapshot AS \"ts\",\n  m.value_jsonb->>'full_table_name' as \"table\",\n  sum( coalesce((m.value_jsonb->>'idx_tup_fetch')::float8, 0) ) as \"value\"\nFROM data m\nINNER JOIN tables t ON t.table = m.value_jsonb->>'full_table_name'\nGROUP BY 1,2\nORDER BY 1,2)\n\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    \"table\", avg(value)\nfrom data2\nGROUP BY 1,2\nORDER BY 1,2\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Index tuples access",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "600px",
               "id": 43,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 4,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\n    select\n        snapshot,\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.user_tables')::uuid\n), tables AS(\n    SELECT\n        m.value_jsonb->>'full_table_name' as \"table\",\n        sum( coalesce((m.value_jsonb->>'n_tup_ins')::float8, 0) + coalesce((value_jsonb->>'n_tup_upd')::float8, 0) + coalesce((value_jsonb->>'n_tup_del')::float8, 0) + coalesce((value_jsonb->>'n_tup_hot_upd')::float8, 0) )\n    FROM data m\n    GROUP BY 1\n    ORDER BY 2 DESC\n    LIMIT 20\n)\n,data2 as ( SELECT\n  m.snapshot AS \"ts\",\n  m.value_jsonb->>'full_table_name' as \"table\",\n  sum( coalesce((m.value_jsonb->>'n_tup_ins')::float8, 0) + coalesce((value_jsonb->>'n_tup_upd')::float8, 0) + coalesce((value_jsonb->>'n_tup_del')::float8, 0) + coalesce((value_jsonb->>'n_tup_hot_upd')::float8, 0) ) as \"value\"\nFROM data m\nINNER JOIN tables t ON t.table = m.value_jsonb->>'full_table_name'\nGROUP BY 1,2\nORDER BY 1,2)\n\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    \"table\", avg(value)\nfrom data2\nGROUP BY 1,2\nORDER BY 1,2\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Changed tuples",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "600px",
               "id": 44,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 4,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\n    select\n        snapshot,\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.user_tables.io')::uuid\n), tables AS(\n    SELECT\n        m.value_jsonb->>'full_table_name' as \"table\",\n        sum( coalesce((m.value_jsonb->>'heap_blks_read')::float8, 0) )  as \"rows\"\n    FROM data m\n    GROUP BY 1\n    ORDER BY 2 DESC\n    LIMIT 20\n)\n\n, data2 as (\nSELECT\n  m.snapshot AS \"ts\",\n  m.value_jsonb->>'full_table_name' as \"table\",\n  sum( coalesce((m.value_jsonb->>'heap_blks_read')::float8, 0) )  * 8 * 1024 as \"value\"\nFROM data m\nINNER JOIN tables t ON t.table = m.value_jsonb->>'full_table_name'\nGROUP BY 1,2\nORDER BY 1 )\n\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    \"table\",\n    avg(value)\nfrom data2\nGROUP BY 1,2\nORDER BY 1,2\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Heap (read from disk)",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "Bps",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "Bps",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "600px",
               "id": 45,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 4,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\n    select\n        snapshot,\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.user_tables.io')::uuid\n), tables AS(\n    SELECT\n        m.value_jsonb->>'full_table_name' as \"table\",\n        sum( coalesce((m.value_jsonb->>'tidx_blks_read')::float8, 0) )  as \"rows\"\n    FROM data m\n    GROUP BY 1\n    ORDER BY 2 DESC\n    LIMIT 20\n)\n\n,data2 as (\nSELECT\n  m.snapshot AS \"ts\",\n  m.value_jsonb->>'full_table_name' as \"table\",\n  sum( coalesce((m.value_jsonb->>'tidx_blks_read')::float8, 0) )  * 8 * 1024 as \"value\"\nFROM data m\nINNER JOIN tables t ON t.table = m.value_jsonb->>'full_table_name'\nGROUP BY 1,2\nORDER BY 1\n)\n\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    \"table\", avg(value)\nfrom data2\nGROUP BY 1,2\nORDER BY 1,2\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Index (read from disk)",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "Bps",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "Bps",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "600px",
               "id": 46,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 4,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\n    select\n        snapshot,\n        jsonb_array_elements(value_jsonb) as value_jsonb\n    from metric where\n        $__unixEpochFilter(ts) AND\n        host = md5('$host')::uuid AND\n        plugin = md5('pg.user_tables.io')::uuid\n), tables AS (\n    SELECT\n        m.value_jsonb->>'full_table_name' as \"table\",\n        sum( coalesce((m.value_jsonb->>'toast_blks_read')::float8, 0) )  as \"rows\"\n    FROM data m\n    GROUP BY 1\n    ORDER BY 2 DESC\n    LIMIT 20\n)\n\n, data2 as (SELECT\n  m.snapshot AS \"ts\",\n  m.value_jsonb->>'full_table_name' as \"table\",\n  sum( coalesce((m.value_jsonb->>'toast_blks_read')::float8, 0) )  * 8 * 1024 as \"value\"\nFROM data m\nINNER JOIN tables t ON t.table = m.value_jsonb->>'full_table_name'\nGROUP BY 1,2\nORDER BY 1)\n\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    \"table\", avg(value)\nfrom data2\nGROUP BY 1,2\nORDER BY 1,2\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Toast (read from disk)",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "Bps",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "Bps",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "Table read/modify (tuples/disk)",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": true,
         "collapsed": true,
         "height": "600px",
         "panels": [
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 47,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 6,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "SELECT\n  time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n  avg( (value_jsonb->>'checkpoints_timed')::bigint ) as \"timed\",\n  avg( (value_jsonb->>'checkpoints_req')::bigint ) as \"required\"\nFROM metric\nWHERE\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.bgwriter')::uuid\nGROUP BY 1\nORDER BY 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Checkponts (count)",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "none",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "none",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 48,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 6,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "SELECT\n  time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n  avg( (value_jsonb->>'checkpoint_write_time')::float8 ) as \"write\",\n  avg( (value_jsonb->>'checkpoint_sync_time')::float8 ) as \"sync\"\nFROM metric\nWHERE\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.bgwriter')::uuid\nGROUP BY 1\nORDER BY 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Checkponts (time)",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "ms",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "ms",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 49,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 6,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "SELECT\n  time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n  avg(value_double) as \"wal generation speed\"\nfrom metric where\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.wal.speed')::uuid\nGROUP BY 1\nORDER BY 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "WAL speed",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "Bps",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "Bps",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 50,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 6,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with slots as (\n select\n  distinct(jsonb_object_keys(value_jsonb)) as name\n from metric where\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.replication_slots')::uuid\n)\n, data2 as (SELECT\n  ts as \"ts\",\n  sum(coalesce((m.value_jsonb->>(s.name))::bigint, 0)) as \"value\",\n  s.name\nfrom metric m, slots s\nwhere\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.replication_slots')::uuid\ngroup by ts, s.name\norder by ts, s.name\n)\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg(value),\n    name\nfrom data2\nGROUP BY 1,3\nORDER BY 1,3\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Slot sizes",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 51,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 12,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (SELECT\n  snapshot AS \"ts\",\n  (value_jsonb->>'buffers_checkpoint')::float8 * 8 * 1024 as \"checkpoint\",\n  (value_jsonb->>'buffers_clean')::float8 * 8 * 1024 as \"bgwriter\",\n  (value_jsonb->>'buffers_backend')::float8 * 8 * 1024 as \"backend\"\nFROM metric\nWHERE\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('pg.bgwriter')::uuid\nORDER BY 1)\n\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n    avg(checkpoint) as \"checkpoint\",\n    avg(bgwriter) as \"bgwriter\",\n    avg(backend) as \"backend\"\nfrom data\nGROUP BY 1\nORDER BY 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Buffers write",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "Bps",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "Bps",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "WAL",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": true,
         "collapsed": true,
         "height": "600px",
         "panels": [
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 52,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 6,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "SELECT\n  time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n  avg( (value_jsonb->>'user')::float8 ) / 100 AS \"user\",\n  avg( (value_jsonb->>'nice')::float8 ) / 100 AS \"nice\",\n  avg( (value_jsonb->>'system')::float8 ) / 100 AS \"system\",\n  avg( (value_jsonb->>'idle')::float8 ) / 100 AS \"idle\",\n  avg( (value_jsonb->>'iowait')::float8 ) / 100 AS \"iowait\",\n  avg( (value_jsonb->>'irq')::float8 ) / 100 AS \"irq\",\n  avg( (value_jsonb->>'softirq')::float8 ) / 100 AS \"softirq\",\n  avg( (value_jsonb->>'steal')::float8 ) / 100 AS \"steal\",\n  avg( (value_jsonb->>'guest')::float8 ) / 100 AS \"guest\",\n  avg( (value_jsonb->>'guest_nice')::float8 ) AS \"guest_nice\"\nFROM metric\nWHERE\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('linux.cpu')::uuid\nGROUP BY 1\nORDER BY 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "CPU",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "percentunit",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "percentunit",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 53,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 6,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "SELECT\n  time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n  avg( value_bigint ) AS \"running process\"\nFROM metric\nWHERE\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('linux.cpu.running')::uuid\nGROUP BY 1\nORDER BY 1\n",
                     "refId": "A"
                  },
                  {
                     "format": "time_series",
                     "rawSql": "SELECT\n  time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n  avg( value_bigint ) AS \"blocked process\"\nFROM metric\nWHERE\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('linux.cpu.blocked')::uuid\nGROUP BY 1\nORDER BY 1\n",
                     "refId": "B"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "CPU: running/blocked && fork-rate",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "short",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "short",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 54,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 12,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "SELECT\n  time_bucket('\"$interval\"'::interval, to_timestamp(ts) AT TIME ZONE 'UTC' ) AS \"time\",\n  avg( (value_jsonb->>'MemFree')::bigint) AS \"MemFree\",\n  avg( (value_jsonb->>'Buffers')::bigint) AS \"Buffers\",\n  avg( (value_jsonb->>'Cached')::bigint) AS \"Cached\",\n  avg( (value_jsonb->>'Dirty')::bigint) AS \"Dirty\",\n  avg( (value_jsonb->>'Slab')::bigint) AS \"Slab\"\nFROM metric\nWHERE\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('linux.memory')::uuid\nGROUP BY 1\nORDER BY 1\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Memory",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 55,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 6,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\nSELECT\n  ts AS \"time\",\n  value_jsonb->>'mountpoint' as \"mountpoint\",\n  sum(coalesce((value_jsonb->>'utilization')::float8,0)) as \"value\"\nFROM metric\nWHERE\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('linux.diskstats')::uuid\nGROUP BY 1,2\nORDER BY 1\n)\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(time) AT TIME ZONE 'UTC' ) AS \"time\",\n    mountpoint, avg(value) / 100\nfrom data\nGROUP BY 1,2\nORDER BY 1,2\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Disk utilization",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "percentunit",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "percentunit",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": true,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$POSTGRES_DS",
               "fill": 1,
               "height": "400px",
               "id": 56,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": false,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 6,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "format": "time_series",
                     "rawSql": "with data as (\nSELECT\n  ts AS \"time\",\n  value_jsonb->>'mountpoint' as \"mountpoint\",\n  sum((value_jsonb->>'await')::float8) as \"value\"\nFROM metric\nWHERE\n  $__unixEpochFilter(ts) AND\n  host = md5('$host')::uuid AND\n  plugin = md5('linux.diskstats')::uuid\nGROUP BY 1,2\nORDER BY 1\n)\n\nSELECT\n    time_bucket('\"$interval\"'::interval, to_timestamp(time) AT TIME ZONE 'UTC' ) AS \"time\",\n    mountpoint, avg(value)\nfrom data\nGROUP BY 1,2\nORDER BY 1,2\n",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Disk await",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "ms",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "ms",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "System",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": true,
         "collapsed": true,
         "height": "600px",
         "panels": [
            {
               "aliasColors": { },
               "bars": false,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$PROMETHEUS_DS",
               "fill": 1,
               "height": "400px",
               "id": 57,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": true,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 6,
               "stack": false,
               "steppedLine": false,
               "targets": [
                  {
                     "expr": "avg_over_time(aws_rds_freeable_memory_average{dbinstance_identifier=\"$host\"}[$__interval])",
                     "format": "time_series",
                     "intervalFactor": 2,
                     "legendFormat": "Freeable",
                     "refId": "A"
                  },
                  {
                     "expr": "avg_over_time(aws_rds_memory_total{dbinstance_identifier=\"$host\"}[$__interval])",
                     "format": "time_series",
                     "intervalFactor": 2,
                     "legendFormat": "Total",
                     "refId": "B"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Memory",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "decbytes",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": false,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$PROMETHEUS_DS",
               "fill": 1,
               "height": "400px",
               "id": 58,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": true,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 6,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "expr": "avg_over_time(aws_rds_cpuutilization_average{dbinstance_identifier=\"$host\"}[$__interval]) / 100",
                     "format": "time_series",
                     "intervalFactor": 2,
                     "legendFormat": "CPU",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "CPU",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "percentunit",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "percentunit",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": false,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$PROMETHEUS_DS",
               "fill": 1,
               "height": "400px",
               "id": 59,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": true,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": true,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 12,
               "stack": true,
               "steppedLine": false,
               "targets": [
                  {
                     "expr": "avg_over_time(aws_rds_write_iops_average{dbinstance_identifier=\"$host\"}[$__interval])",
                     "format": "time_series",
                     "intervalFactor": 2,
                     "legendFormat": "Write ops",
                     "refId": "A"
                  },
                  {
                     "expr": "avg_over_time(aws_rds_read_iops_average{dbinstance_identifier=\"$host\"}[$__interval])",
                     "format": "time_series",
                     "intervalFactor": 2,
                     "legendFormat": "Read ops",
                     "refId": "B"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "IOPS",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "RDS metrics",
         "titleSize": "h6",
         "type": "row"
      },
      {
         "collapse": true,
         "collapsed": true,
         "height": "600px",
         "panels": [
            {
               "aliasColors": { },
               "bars": false,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$PROMETHEUS_DS",
               "fill": 1,
               "height": "400px",
               "id": 60,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": true,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 6,
               "stack": false,
               "steppedLine": false,
               "targets": [
                  {
                     "expr": "sum(rate(pg_gatherer_plugin_errors{}[$__interval])) by (plugin)",
                     "format": "time_series",
                     "intervalFactor": 2,
                     "legendFormat": "{{plugin}}",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Errors by plugin",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            },
            {
               "aliasColors": { },
               "bars": false,
               "dashLength": 10,
               "dashes": false,
               "datasource": "$PROMETHEUS_DS",
               "fill": 1,
               "height": "400px",
               "id": 61,
               "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": false,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "max",
                  "sortDesc": true,
                  "total": false,
                  "values": true
               },
               "lines": true,
               "linewidth": 1,
               "links": [ ],
               "nullPointMode": "null",
               "percentage": false,
               "pointradius": 5,
               "points": false,
               "renderer": "flot",
               "repeat": null,
               "seriesOverrides": [ ],
               "spaceLength": 10,
               "span": 6,
               "stack": false,
               "steppedLine": false,
               "targets": [
                  {
                     "expr": "sum(rate(pg_gatherer_plugin_errors{}[$__interval])) by (host)",
                     "format": "time_series",
                     "intervalFactor": 2,
                     "legendFormat": "{{host}}",
                     "refId": "A"
                  }
               ],
               "thresholds": [ ],
               "timeFrom": null,
               "timeShift": null,
               "title": "Errors by host",
               "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
               },
               "transparent": true,
               "type": "graph",
               "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": [ ]
               },
               "yaxes": [
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  },
                  {
                     "format": "ops",
                     "label": null,
                     "logBase": 1,
                     "max": null,
                     "min": 0,
                     "show": true
                  }
               ]
            }
         ],
         "repeat": null,
         "repeatIteration": null,
         "repeatRowId": null,
         "showTitle": true,
         "title": "Common metrics of plugins",
         "titleSize": "h6",
         "type": "row"
      }
   ],
   "schemaVersion": 14,
   "style": "dark",
   "tags": [
      "postgresql",
      "rds"
   ],
   "templating": {
      "list": [
         {
            "current": {
               "text": "PostgreSQL",
               "value": "PostgreSQL"
            },
            "hide": 1,
            "label": null,
            "name": "POSTGRES_DS",
            "options": [ ],
            "query": "postgres",
            "refresh": 1,
            "regex": "",
            "type": "datasource"
         },
         {
            "current": {
               "text": "Prometheus",
               "value": "Prometheus"
            },
            "hide": 1,
            "label": null,
            "name": "PROMETHEUS_DS",
            "options": [ ],
            "query": "prometheus",
            "refresh": 1,
            "regex": "",
            "type": "datasource"
         },
         {
            "allValue": null,
            "current": { },
            "datasource": "$POSTGRES_DS",
            "hide": 0,
            "includeAll": false,
            "label": null,
            "multi": false,
            "name": "host",
            "options": [ ],
            "query": "select name from host order by name;",
            "refresh": 1,
            "regex": "",
            "sort": 0,
            "tagValuesQuery": "",
            "tags": [ ],
            "tagsQuery": "",
            "type": "query",
            "useTags": false
         },
         {
            "allValue": null,
            "current": {
               "text": "20 minute",
               "value": "20 minute"
            },
            "hide": 0,
            "includeAll": false,
            "label": "",
            "multi": false,
            "name": "interval",
            "options": [
               {
                  "text": "1 minute",
                  "value": "1 minute"
               },
               {
                  "text": "10 minute",
                  "value": "10 minute"
               },
               {
                  "text": "20 minute",
                  "value": "20 minute"
               },
               {
                  "text": "1 hour",
                  "value": "1 hour"
               }
            ],
            "query": "1 minute,10 minute,20 minute,1 hour",
            "refresh": 0,
            "type": "custom"
         }
      ]
   },
   "time": {
      "from": "now-3h",
      "to": "now"
   },
   "timepicker": {
      "refresh_intervals": [
         "5s",
         "10s",
         "30s",
         "1m",
         "5m",
         "15m",
         "30m",
         "1h",
         "2h",
         "1d"
      ],
      "time_options": [
         "5m",
         "15m",
         "1h",
         "6h",
         "12h",
         "24h",
         "2d",
         "7d",
         "30d"
      ]
   },
   "timezone": "UTC",
   "title": "PostgreSQL (pg_gatherer)",
   "version": 0
}
